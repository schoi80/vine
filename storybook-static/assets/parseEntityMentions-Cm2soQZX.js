function d(n){const i=[],a=new RegExp("_((?:[^_]|(?<=\\\\)_)+)_","g");let s=0,l;for(;(l=a.exec(n))!==null;)l.index>s&&i.push({text:n.slice(s,l.index),italic:!1}),i.push({text:l[1],italic:!0}),s=l.index+l[0].length;return s<n.length&&i.push({text:n.slice(s),italic:!1}),i.length>0?i:[{text:n,italic:!1}]}function g(n){if(!n)return[{type:"text",content:""}];const i=/\[([^\]]+)\]\(\[\/(person|place|event)\/([^)]+)\)/g,a=RegExp("(?<!\\()\\[([^\\]]+)\\]\\(\\/(person|place|event)\\/([^)]+)\\)","g"),s=/\[\[(person|place|event):([^|]+)\|([^\]]+)\]\]/g,l=[];let p=0;const c=[];let e;for(;(e=i.exec(n))!==null;)c.push({index:e.index,length:e[0].length,displayText:e[1],type:e[2],slug:e[3]});for(;(e=a.exec(n))!==null;){const t=e.index+e[0].length;c.some(x=>e?e.index<x.index+x.length&&t>x.index:!1)||c.push({index:e.index,length:e[0].length,displayText:e[1],type:e[2],slug:e[3]})}for(;(e=s.exec(n))!==null;)c.push({index:e.index,length:e[0].length,type:e[1],slug:e[2],displayText:e[3]});c.sort((t,h)=>t.index-h.index);for(const t of c)t.index>p&&l.push({type:"text",content:n.slice(p,t.index)}),l.push({type:"entity",content:t.displayText,entity:{type:t.type,slug:t.slug,displayText:t.displayText}}),p=t.index+t.length;return p<n.length&&l.push({type:"text",content:n.slice(p)}),l}export{d as a,g as p};
